(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={SearchForm:"Searchbar_SearchForm__2BrZW",Label:"Searchbar_Label__IkRTr",Input:"Searchbar_Input__2OveX"}},14:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1ls9K",Image:"ImageGalleryItem_Image__3qjbE"}},15:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3KWeE",Modal:"Modal_Modal__1u2Sm"}},18:function(e,t,a){},20:function(e,t,a){e.exports={SearchButton:"ButtonIcon_SearchButton__rXHel"}},21:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3R7zp"}},22:function(e,t,a){e.exports={Button:"Button_Button__3VXGC"}},23:function(e,t,a){e.exports={Image:"Error_Image__bBbPN"}},48:function(e,t,a){"use strict";a.r(t);var r,n=a(0),c=a.n(n),o=a(7),l=a.n(o),s=(a(18),a(19)),i=a(3),u=a.n(i),b=a(16),j=a(5),m=a(2),p=a(9),g=a(13),d=a(24),f=a.n(d),h=a(17),O=(a(30),a(20)),v=a.n(O),x=a(1),I=function(e){var t=e.children;return Object(x.jsx)("button",{className:v.a.SearchButton,type:"submit","aria-label":"search",children:t})},w=c.a.memo(I),y=a(10),_=a.n(y),S=["title","titleId"];function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function E(e,t){var a=e.title,c=e.titleId,o=M(e,S);return n.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",ref:t,"aria-labelledby":c},o),void 0===a?n.createElement("title",{id:c},"search"):a?n.createElement("title",{id:c},a):null,r||(r=n.createElement("path",{d:"M31.715 28.953c0.381 0.381 0.381 0.999 0 1.381l-1.381 1.381c-0.382 0.381-1 0.381-1.381 0l-9.668-9.668c-0.105-0.105-0.175-0.229-0.222-0.361-1.983 1.449-4.418 2.314-7.063 2.314-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12 0 2.645-0.865 5.080-2.314 7.063 0.132 0.047 0.256 0.116 0.361 0.222l9.668 9.668zM12 4c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8c0-4.418-3.582-8-8-8z"})))}var N=n.forwardRef(E),B=(a.p,a(32));function L(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(p.a)(a,2),c=r[0],o=r[1],l=B.generate();return Object(x.jsx)("header",{children:Object(x.jsxs)("form",{onSubmit:function(e){t(e),o("")},className:_.a.SearchForm,children:[Object(x.jsx)("label",{htmlFor:l,className:_.a.Label}),Object(x.jsx)("input",{onChange:function(e){var t=e.target.value;o(t)},id:l,type:"text",className:_.a.Input,value:c,name:"search",placeholder:"Enter a search word"}),Object(x.jsx)(w,{children:Object(x.jsx)(N,{})})]})})}var G=c.a.memo(L),U=a(21),C=a.n(U),F=a(14),R=a.n(F),V=a.p+"static/media/kote-kote.830652e8.jpg",z=function(e){var t=e.prevUrl,a=e.tags,r=e.largeImageURL;return Object(x.jsx)("li",{className:R.a.ImageGalleryItem,children:Object(x.jsx)("img",{alt:a,data:r,className:R.a.Image,src:t})})};z.defaultProps={prevUrl:V};var P,T=z,X=function(e){var t=e.collectionImages,a=e.openModal;return Object(x.jsx)("ul",{onClick:a,className:C.a.ImageGallery,children:t.map((function(e,t){return Object(x.jsx)(T,{largeImageURL:e.largeImageURL,tags:e.tags,prevUrl:e.previewURL},t)}))})},q=a(22),A=a.n(q),H=function(e){var t=e.imageUpload,a=e.text;return Object(x.jsx)("button",{onClick:t,className:A.a.Button,type:"button",children:a})},J=c.a.memo(H),K=function(){var e=Object(j.a)(u.a.mark((function e(t,a){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://pixabay.com/api/","?q=").concat(t,"&page=").concat(a,"&key=").concat("21828776-3a3234db6b008ce4834511463","&").concat("image_type=photo&orientation=horizontal&per_page=12"));case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=a(15),D=a.n(W),Y=function(e){var t=e.children,a=e.closeModal,r=Object(n.useCallback)((function(e){"Escape"===e.code&&a()}),[a]);Object(n.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}),[r]);return Object(x.jsx)("div",{onClick:function(e){var t=e.target;e.currentTarget===t&&a()},className:D.a.Overlay,children:Object(x.jsx)("div",{className:D.a.Modal,children:t})})},Z=a(23),Q=a.n(Z),$=function(){return Object(x.jsx)("img",{className:Q.a.Image,src:V,alt:"not available"})},ee=function(){var e=Object(n.useState)({searchSubject:"",collectionImages:[],page:0,showModal:!1,imgForModal:{url:null,alt:null},status:"idle",buttonVisible:!1}),t=Object(p.a)(e,2),a=t[0],r=t[1];function c(){return(c=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.search.value,a.searchSubject.toLowerCase()!==n.toLowerCase()){e.next=4;break}return e.abrupt("return");case 4:if(n.trim().length){e.next=7;break}return h.b.error("Your string consists of only spaces, enter a valid string!"),e.abrupt("return");case 7:r((function(e){return Object(m.a)(Object(m.a)({},e),{},{page:1,searchSubject:n,collectionImages:[]})}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){0!==a.page&&(r((function(e){return Object(m.a)(Object(m.a)({},e),{},{status:"loading"})})),Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(a.searchSubject,a.page);case 3:if(0!==(t=e.sent).total){e.next=6;break}throw $("Nothing found");case 6:return r((function(e){return Object(m.a)(Object(m.a)({},e),{},{collectionImages:[].concat(Object(b.a)(e.collectionImages),Object(b.a)(t.hits)),buttonVisible:Math.ceil(t.total/12)!==a.page,status:"resolved"})})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),e.abrupt("return");case 11:e.prev=11,e.t0=e.catch(0),r((function(e){return Object(m.a)(Object(m.a)({},e),{},{status:"error",buttonVisible:!1})}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))())}),[a.page,a.searchSubject]);var o=Object(g.css)(P||(P=Object(s.a)(["\n        display: block;\n        margin-left: 50%;\n        border-color: blue;\n    "])));return Object(x.jsxs)("div",{children:[Object(x.jsx)(G,{onSubmit:function(e){return c.apply(this,arguments)}}),Object(x.jsx)(X,{openModal:function(e){var t=e.target,a=e.currentTarget;t!==a&&r((function(e){return Object(m.a)(Object(m.a)({},e),{},{imgForModal:{url:t.getAttribute("data"),alt:t.getAttribute("alt")},showModal:!0})}))},collectionImages:a.collectionImages}),a.buttonVisible&&Object(x.jsx)(J,{imageUpload:function(){r((function(e){return Object(m.a)(Object(m.a)({},e),{},{page:e.page+1,buttonVisible:!1})}))},text:"Load more"}),"loading"===a.status&&Object(x.jsx)(f.a,{loading:!0,css:o,size:40}),a.showModal&&Object(x.jsx)(Y,{closeModal:function(){r((function(e){return Object(m.a)(Object(m.a)({},e),{},{showModal:!1})}))},children:Object(x.jsx)("img",{src:a.imgForModal.url,alt:a.imgForModal.alt})}),"error"===a.status&&Object(x.jsx)($,{}),Object(x.jsx)(h.a,{})]})};l.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(ee,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.56a8fdec.chunk.js.map